<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CoSpaces Iteration</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/inter-ui/3.19.3/inter.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Favicon Icons -->
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <link rel="manifest" href="site.webmanifest">
    <link rel="icon" type="image/png" sizes="192x192" href="android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="android-chrome-512x512.png">
    
    <style>
        /* Image styles for hover and click effects */
        .code-img-container {
            overflow: hidden;
            border-radius: 5px;
            background-color: #f5f5f5;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            width: 100%;
            height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .code-img-container:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .code-img-container::after {
            content: "\f00e";
            font-family: "Font Awesome 5 Free";
            font-weight: 900;
            position: absolute;
            bottom: 10px;
            right: 10px;
            color: var(--accent-color);
            background-color: rgba(255,255,255,0.8);
            padding: 5px;
            border-radius: 50%;
            font-size: 12px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .code-img-container:hover::after {
            opacity: 1;
        }
        
        .code-img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        /* Interactive step styles */
        .code-step-container {
            border: 2px solid var(--outline-color);
            border-radius: var(--border-radius);
            overflow: hidden;
            margin: 30px 0;
        }
        
        .code-step-header {
            background-color: var(--accent-color);
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
        }
        
        .code-step-content {
            padding: 20px;
            background-color: #f9f9f9;
        }
        
        .step-navigation {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            background-color: #f0f0f0;
            border-top: 1px solid var(--outline-color);
        }
        
        .step-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }
        
        .step-btn:hover:not(:disabled) {
            background-color: #0056b3;
        }
        
        .step-btn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        .loop-step {
            display: none;
        }
        
        .loop-step.active {
            display: block;
        }
        
        /* Modal styles */
        .img-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            overflow: auto;
            padding: 50px;
            box-sizing: border-box;
        }
        
        .modal-content {
            margin: 0 auto;
            display: block;
            max-width: 90%;
            max-height: 90vh;
            object-fit: contain;
            position: relative;
            top: 50%;
            transform: translateY(-50%);
            border: 2px solid #fff;
            border-radius: 5px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        
        .close-modal {
            position: absolute;
            top: 20px;
            right: 30px;
            color: #fff;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
            z-index: 1001;
        }
        
        .close-modal:hover {
            color: var(--accent-color);
        }
    </style>
</head>
<body>
    <!-- Sidebar Navigation -->
    <aside class="sidebar" style="overflow-y: auto; overflow-x: hidden;">
        <div class="sidebar-logo">COSPACES ITERATION</div>
        <a href="index.html" class="home-button">
            <i class="fas fa-home"></i>
            HOME
        </a>
        <div class="sidebar-nav">
            <button class="tab-button active" data-tab="lisc">
                <i class="fas fa-clipboard-list"></i>
                LI/SC
            </button>
            <button class="tab-button" data-tab="chunk1">
                <i class="fas fa-cube"></i>
                CHUNK 1
            </button>
            <button class="tab-button" data-tab="chew1">
                <i class="fas fa-utensils"></i>
                CHEW 1
            </button>
            <button class="tab-button" data-tab="chunk2">
                <i class="fas fa-cube"></i>
                CHUNK 2
            </button>
            <button class="tab-button" data-tab="chew2">
                <i class="fas fa-utensils"></i>
                CHEW 2
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Learning Intentions and Success Criteria section -->
        <section id="lisc" class="tab-content active light-section">
            <h1>LEARNING INTENTIONS & SUCCESS CRITERIA <i class="fas fa-bullseye" style="margin-left: 15px;"></i></h1>
            
            <div class="card">
                <div class="element-header" style="margin: -35px -40px 30px -40px; padding: 25px 35px;">
                    <div class="element-number">1</div>
                    <h3>Learning Intentions <i class="fas fa-bullseye" style="margin-left: 15px; color: var(--accent-color);"></i></h3>
                </div>
                
                <ul>
                    <li><i class="fas fa-check-circle" style="color: var(--accent-color); margin-right: 12px;"></i> Understand what iteration (loops) is and why it's important in coding</li>
                    <li><i class="fas fa-check-circle" style="color: var(--accent-color); margin-right: 12px;"></i> Learn how to create and use different types of loops in CoSpaces</li>
                    <li><i class="fas fa-check-circle" style="color: var(--accent-color); margin-right: 12px;"></i> Discover how loops can make your code shorter and more efficient</li>
                    <li><i class="fas fa-check-circle" style="color: var(--accent-color); margin-right: 12px;"></i> Learn how to control loops and make decisions inside them</li>
                </ul>
            </div>
            
            <div class="card">
                <div class="element-header" style="margin: -35px -40px 30px -40px; padding: 25px 35px;">
                    <div class="element-number">2</div>
                    <h3>Success Criteria <i class="fas fa-trophy" style="margin-left: 15px; color: var(--accent-color);"></i></h3>
                </div>
                
                <p>By the end of this lesson, you should be able to:</p>
                
                <ul>
                    <li><i class="fas fa-star" style="color: var(--accent-color); margin-right: 12px;"></i> Create a "repeat forever" loop to make actions continue</li>
                    <li><i class="fas fa-star" style="color: var(--accent-color); margin-right: 12px;"></i> Use a "repeat x times" loop to perform an action a specific number of times</li>
                    <li><i class="fas fa-star" style="color: var(--accent-color); margin-right: 12px;"></i> Replace repetitive code with a loop to make your program more efficient</li>
                    <li><i class="fas fa-star" style="color: var(--accent-color); margin-right: 12px;"></i> Create an animation or game element that uses loops</li>
                </ul>
            </div>
        </section>

        <!-- CHUNK 1: What is Iteration? -->
        <section id="chunk1" class="tab-content dark-section">
            <h1>CHUNK 1: WHAT IS ITERATION? <i class="fas fa-sync-alt" style="margin-left: 15px;"></i></h1>
            
            <div class="chunk-section">
                <div class="chunk-badge">TEACHER CHUNK</div>
                <div class="timer-badge"><i class="fas fa-clock"></i> 5 mins</div>
                
                <h3>Iteration: Making Things Repeat</h3>
                
                <p>Iteration, or looping, is like having a personal assistant who will do the same task over and over again without getting tired. In CoSpaces, loops help us tell the computer to repeat actions without having to write the same code multiple times.</p>
                
                <div class="two-column-grid" style="margin-top: 30px;">
                    <div class="interactive-card">
                        <div class="element-header" style="margin: -35px -35px 30px -35px; padding: 20px 25px;">
                            <div class="element-number">1</div>
                            <h3>Why Use Loops? <i class="fas fa-question-circle" style="margin-left: 10px;"></i></h3>
                        </div>
                        
                        <div class="variable-animation" style="padding: 30px;">
                            <div style="display: flex; justify-content: center; margin-bottom: 30px;">
                                <div style="text-align: center;">
                                    <i class="fas fa-sync" style="font-size: 6em; color: var(--accent-color);"></i>
                                </div>
                            </div>
                            
                            <p style="text-align: center; font-weight: bold; font-size: 1.2em; margin-bottom: 25px;">Imagine you want a character to move forward 5 times:</p>
                            
                            <div class="two-column-grid">
                                <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); padding: 15px; background-color: rgba(255,0,0,0.1);">
                                    <h4><i class="fas fa-times-circle" style="color: var(--bad-color); margin-right: 10px;"></i> Without Loops (Repetitive)</h4>
                                    <div style="background-color: white; border-radius: var(--border-radius); padding: 15px; margin-top: 10px;">
                                        <p style="margin: 0; font-style: italic; color: #666;">move forward</p>
                                        <p style="margin: 0; font-style: italic; color: #666;">move forward</p>
                                        <p style="margin: 0; font-style: italic; color: #666;">move forward</p>
                                        <p style="margin: 0; font-style: italic; color: #666;">move forward</p>
                                        <p style="margin: 0; font-style: italic; color: #666;">move forward</p>
                                    </div>
                                </div>
                                
                                <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); padding: 15px; background-color: rgba(0,255,0,0.1);">
                                    <h4><i class="fas fa-check-circle" style="color: var(--good-color); margin-right: 10px;"></i> With Loops (Efficient)</h4>
                                    <div style="background-color: white; border-radius: var(--border-radius); padding: 15px; margin-top: 10px;">
                                        <p style="margin: 0; font-style: italic; color: #666;">repeat 5 times:</p>
                                        <p style="margin: 0; font-style: italic; color: #666; margin-left: 20px;">move forward</p>
                                        <p style="margin: 0; font-style: italic; color: #666;">end repeat</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="interactive-card">
                        <div class="element-header" style="margin: -35px -35px 30px -35px; padding: 20px 25px;">
                            <div class="element-number">2</div>
                            <h3>Iteration is Everywhere <i class="fas fa-globe" style="margin-left: 10px;"></i></h3>
                        </div>
                        
                        <p style="font-size: 1.2em; text-align: center; font-weight: 600; margin-bottom: 20px;">Loops are like many things in real life:</p>
                        
                        <div class="icon-box">
                            <div class="icon-container">
                                <i class="fas fa-heartbeat"></i>
                            </div>
                            <div class="icon-text">
                                <h4>Your heartbeat</h4>
                                <p>Beats over and over without stopping</p>
                            </div>
                        </div>
                        
                        <div class="icon-box">
                            <div class="icon-container">
                                <i class="fas fa-walking"></i>
                            </div>
                            <div class="icon-text">
                                <h4>Walking steps</h4>
                                <p>The same action repeated many times</p>
                            </div>
                        </div>
                        
                        <div class="icon-box">
                            <div class="icon-container">
                                <i class="fas fa-basketball-ball"></i>
                            </div>
                            <div class="icon-text">
                                <h4>Bouncing ball</h4>
                                <p>Goes up and down repeatedly</p>
                            </div>
                        </div>
                        
                        <div class="icon-box">
                            <div class="icon-container">
                                <i class="fas fa-music"></i>
                            </div>
                            <div class="icon-text">
                                <h4>Music chorus</h4>
                                <p>The same part repeats several times</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Types of Loops Section -->
                <div class="interactive-card" style="margin-top: 30px;">
                    <div class="element-header" style="margin: -35px -35px 30px -35px; padding: 20px 25px;">
                        <div class="element-number">3</div>
                        <h3>Types of Loops in CoSpaces <i class="fas fa-list-ul" style="margin-left: 10px;"></i></h3>
                    </div>
                    
                    <p style="font-size: 1.2em; text-align: center; margin-bottom: 20px;">CoSpaces has different kinds of loops for different jobs:</p>
                    
                    <div class="elements-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                        <div class="element-card" style="background-color: #f0f7ff; transition: all 0.3s ease;">
                            <div class="element-header">
                                <div class="element-number">1</div>
                                <h3>REPEAT FOREVER <i class="fas fa-infinity" style="margin-left: 12px;"></i></h3>
                            </div>
                            <div class="element-content">
                                <p>Keeps repeating actions without ever stopping</p>
                                <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); overflow: hidden; margin: 15px auto; max-width: 250px;">
                                    <div style="padding: 10px;">
                                        <div class="code-img-container" onclick="openModal('repeat-forever')">
                                            <img src="placeholder-repeat-forever.png" alt="Repeat forever block" class="code-img" id="repeat-forever">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="element-card" style="background-color: #f0fff4; transition: all 0.3s ease;">
                            <div class="element-header">
                                <div class="element-number">2</div>
                                <h3>REPEAT X TIMES <i class="fas fa-sort-numeric-up" style="margin-left: 12px;"></i></h3>
                            </div>
                            <div class="element-content">
                                <p>Repeats actions a specific number of times, then stops</p>
                                <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); overflow: hidden; margin: 15px auto; max-width: 250px;">
                                    <div style="padding: 10px;">
                                        <div class="code-img-container" onclick="openModal('repeat-x-times')">
                                            <img src="placeholder-repeat-x-times.png" alt="Repeat X times block" class="code-img" id="repeat-x-times">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3>Benefits of Using Loops <i class="fas fa-thumbs-up" style="margin-left: 10px;"></i></h3>
                <div class="elements-grid" style="display: grid; grid-template-columns: repeat(2, 1fr);">
                    <div class="element-card" style="background-color: #f0f7ff; transition: all 0.3s ease;">
                        <div class="element-header">
                            <div class="element-number">1</div>
                            <h3>SHORTER CODE <i class="fas fa-compress-alt" style="margin-left: 12px;"></i></h3>
                        </div>
                        <div class="element-content">
                            <p>Loops make your code shorter and easier to read</p>
                            <div style="text-align: center; margin-top: 15px;">
                                <i class="fas fa-file-code" style="font-size: 2.5em; color: var(--accent-color);"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="element-card" style="background-color: #f0fff4; transition: all 0.3s ease;">
                        <div class="element-header">
                            <div class="element-number">2</div>
                            <h3>LESS MISTAKES <i class="fas fa-check" style="margin-left: 12px;"></i></h3>
                        </div>
                        <div class="element-content">
                            <p>Writing code once reduces chances for errors</p>
                            <div style="text-align: center; margin-top: 15px;">
                                <i class="fas fa-bug-slash" style="font-size: 2.5em; color: var(--accent-color);"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="element-card" style="background-color: #fff7f0; transition: all 0.3s ease;">
                        <div class="element-header">
                            <div class="element-number">3</div>
                            <h3>EASIER CHANGES <i class="fas fa-edit" style="margin-left: 12px;"></i></h3>
                        </div>
                        <div class="element-content">
                            <p>Change the code once, and it updates everywhere in the loop</p>
                            <div style="text-align: center; margin-top: 15px;">
                                <i class="fas fa-magic" style="font-size: 2.5em; color: var(--accent-color);"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="element-card" style="background-color: #f0f0ff; transition: all 0.3s ease;">
                        <div class="element-header">
                            <div class="element-number">4</div>
                            <h3>ANIMATIONS <i class="fas fa-film" style="margin-left: 12px;"></i></h3>
                        </div>
                        <div class="element-content">
                            <p>Create smooth animations and ongoing behaviors</p>
                            <div style="text-align: center; margin-top: 15px;">
                                <i class="fas fa-running" style="font-size: 2.5em; color: var(--accent-color);"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CHEW 1: Concept Check -->
        <section id="chew1" class="tab-content light-section">
            <h1>CHEW 1: CONCEPT CHECK <i class="fas fa-clipboard-check" style="margin-left: 15px;"></i></h1>
            
            <div class="chew-section">
                <div class="chew-badge">STUDENT ACTIVITY</div>
                <div class="timer-badge"><i class="fas fa-clock"></i> 5 mins</div>
                
                <h3>Check Your Understanding</h3>
                
                <div class="activity-goal">
                    <h4><i class="fas fa-bullseye" style="color: var(--chew-color);"></i> Activity Goals</h4>
                    <ul style="list-style-type: none; padding-left: 0;">
                        <li><i class="fas fa-angle-right" style="margin-right: 12px; color: var(--chew-color);"></i> Identify repeating patterns in everyday activities</li>
                        <li><i class="fas fa-angle-right" style="margin-right: 12px; color: var(--chew-color);"></i> Understand the difference between the loop types</li>
                        <li><i class="fas fa-angle-right" style="margin-right: 12px; color: var(--chew-color);"></i> Think of scenarios where loops would be useful</li>
                    </ul>
                </div>
                
                <div class="interactive-card">
                    <div class="element-header" style="margin: -35px -35px 30px -35px; padding: 20px 25px;">
                        <div class="element-number">1</div>
                        <h3>Loops in Real Life <i class="fas fa-street-view" style="margin-left: 10px;"></i></h3>
                    </div>
                    
                    <div style="background-color: rgba(16, 185, 129, 0.1); border-radius: var(--border-radius); padding: 25px; margin-bottom: 25px; text-align: center;">
                        <p style="font-size: 1.3em; font-weight: 600; margin-bottom: 15px;">Think about your day:</p>
                        <p style="text-align: left; font-size: 1.2em; margin-left: 20px; margin-bottom: 15px;">Write down 3 activities from your daily life that involve repetition:</p>
                        <ol style="text-align: left; font-size: 1.1em; margin-left: 20px;">
                            <li style="margin-bottom: 10px;">_____________________</li>
                            <li style="margin-bottom: 10px;">_____________________</li>
                            <li>_____________________</li>
                        </ol>
                    </div>
                    
                    <div style="background-color: white; border-radius: var(--border-radius); padding: 20px; border: 2px dashed var(--chew-color);">
                        <p style="margin: 0; text-align: center;"><i class="fas fa-lightbulb" style="color: var(--chew-color); margin-right: 10px;"></i> <strong>Hint:</strong> Think about brushing teeth, walking to school, eating meals, or playing games!</p>
                    </div>
                </div>
                
                <div class="interactive-card" style="margin-top: 30px;">
                    <div class="element-header" style="margin: -35px -35px 30px -35px; padding: 20px 25px;">
                        <div class="element-number">2</div>
                        <h3>Loop Type Matching <i class="fas fa-puzzle-piece" style="margin-left: 10px;"></i></h3>
                    </div>
                    
                    <p style="font-size: 1.3em; font-weight: 600; text-align: center; margin-bottom: 25px;">Match the scenario to the best loop type:</p>
                    
                    <div style="background-color: rgba(16, 185, 129, 0.1); border-radius: var(--border-radius); padding: 25px; margin: 0 0 25px 0;">
                        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; margin-bottom: 15px;">
                            <div>1. A character patrolling back and forth forever</div>
                            <div>□ Repeat X Times<br>□ Repeat Forever</div>
                        </div>
                        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; margin-bottom: 15px;">
                            <div>2. Creating 10 identical trees in a row</div>
                            <div>□ Repeat X Times<br>□ Repeat Forever</div>
                        </div>
                        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; margin-bottom: 15px;">
                            <div>3. Making a character jump 5 times then stop</div>
                            <div>□ Repeat X Times<br>□ Repeat Forever</div>
                        </div>
                        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px;">
                            <div>4. Background music that plays continuously</div>
                            <div>□ Repeat X Times<br>□ Repeat Forever</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CHUNK 2: Using Loops Effectively -->
        <section id="chunk2" class="tab-content dark-section">
            <h1>CHUNK 2: USING LOOPS EFFECTIVELY <i class="fas fa-code" style="margin-left: 15px;"></i></h1>
            
            <div class="chunk-section">
                <div class="chunk-badge">TEACHER CHUNK</div>
                <div class="timer-badge"><i class="fas fa-clock"></i> 5 mins</div>
                
                <h3>Making Your Loops Work Smarter</h3>
                
                <p>Now that we understand the basics of loops, let's see how to use them effectively in CoSpaces to create more interesting and interactive projects.</p>
                
                <!-- Loop Examples -->
                <div class="interactive-card">
                    <div class="element-header" style="margin: -35px -35px 30px -35px; padding: 20px 25px;">
                        <div class="element-number">1</div>
                        <h3>Using "Repeat Forever" Loops <i class="fas fa-infinity" style="margin-left: 10px;"></i></h3>
                    </div>
                    
                    <p style="font-size: 1.2em; text-align: center; margin-bottom: 20px;">"Repeat Forever" loops are perfect for ongoing actions that should never stop:</p>
                    
                    <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); overflow: hidden; margin: 0 auto; max-width: 400px;">
                        <div style="background-color: var(--accent-color); color: white; padding: 10px; text-align: center; font-weight: bold;">
                            Example: Character Patrol
                        </div>
                        <div style="padding: 15px;">
                            <div class="code-img-container" onclick="openModal('character-patrol')">
                                <img src="placeholder-character-patrol.png" alt="Character moving back and forth using repeat forever" class="code-img" id="character-patrol">
                            </div>
                        </div>
                    </div>
                    
                    <div style="background-color: rgba(0,0,0,0.05); border-radius: var(--border-radius); padding: 20px; margin-top: 25px;">
                        <h4 style="margin-top: 0;"><i class="fas fa-lightbulb" style="color: var(--accent-color); margin-right: 10px;"></i> When to use "Repeat Forever":</h4>
                        <ul style="list-style-type: none; padding-left: 10px;">
                            <li><i class="fas fa-angle-right" style="margin-right: 12px; color: var(--accent-color);"></i> Background elements like clouds moving across the sky</li>
                            <li><i class="fas fa-angle-right" style="margin-right: 12px; color: var(--accent-color);"></i> Characters that patrol or move continuously</li>
                            <li><i class="fas fa-angle-right" style="margin-right: 12px; color: var(--accent-color);"></i> Games where you're always checking for player input</li>
                            <li><i class="fas fa-angle-right" style="margin-right: 12px; color: var(--accent-color);"></i> Animations that should continue throughout the experience</li>
                        </ul>
                    </div>
                </div>
                
                <div class="interactive-card" style="margin-top: 30px;">
                    <div class="element-header" style="margin: -35px -35px 30px -35px; padding: 20px 25px;">
                        <div class="element-number">2</div>
                        <h3>Using "Repeat X Times" Loops <i class="fas fa-sort-numeric-up" style="margin-left: 10px;"></i></h3>
                    </div>
                    
                    <p style="font-size: 1.2em; text-align: center; margin-bottom: 20px;">"Repeat X Times" loops are great for actions that should happen a specific number of times:</p>
                    
                    <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); overflow: hidden; margin: 0 auto; max-width: 400px;">
                        <div style="background-color: var(--accent-color); color: white; padding: 10px; text-align: center; font-weight: bold;">
                            Example: Creating Multiple Objects
                        </div>
                        <div style="padding: 15px;">
                            <div class="code-img-container" onclick="openModal('img1')">
                                <img src="https://i.imgur.com/5jvqwAz.png" alt="Creating multiple objects in a pattern" class="code-img" id="img1">
                            </div>
                        </div>
                    </div>
                    
                    <div style="background-color: rgba(0,0,0,0.05); border-radius: var(--border-radius); padding: 20px; margin-top: 25px;">
                        <h4 style="margin-top: 0;"><i class="fas fa-lightbulb" style="color: var(--accent-color); margin-right: 10px;"></i> When to use "Repeat X Times":</h4>
                        <ul style="list-style-type: none; padding-left: 10px;">
                            <li><i class="fas fa-angle-right" style="margin-right: 12px; color: var(--accent-color);"></i> Creating multiple objects (like trees or buildings)</li>
                            <li><i class="fas fa-angle-right" style="margin-right: 12px; color: var(--accent-color);"></i> Character actions (like jumping 3 times)</li>
                            <li><i class="fas fa-angle-right" style="margin-right: 12px; color: var(--accent-color);"></i> Animations that should play a specific number of times</li>
                            <li><i class="fas fa-angle-right" style="margin-right: 12px; color: var(--accent-color);"></i> Countdown sequences (3, 2, 1, Go!)</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Interactive Loop Simulation -->
                <div class="interactive-card" style="margin-top: 30px;">
                    <div class="element-header" style="margin: -35px -35px 30px -35px; padding: 20px 25px;">
                        <div class="element-number">3</div>
                        <h3>Loop Step-by-Step <i class="fas fa-shoe-prints" style="margin-left: 10px;"></i></h3>
                    </div>
                    
                    <p style="font-size: 1.2em; text-align: center; margin-bottom: 20px;">Let's see how a loop executes step by step:</p>
                    
                    <div class="code-step-container">
                        <div class="code-step-header" style="padding: 15px; margin-bottom: 10px;">
                            <span>Loop Execution Visualization</span>
                            <span id="loop-step-indicator">Step 1 of 5</span>
                        </div>
                        
                        <div class="code-step-content">
                            <!-- Loop Step 1: Start -->
                            <div id="loop-step-1" class="loop-step active">
                                <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); overflow: hidden; margin: 10px auto 20px auto; max-width: 400px;">
                                    <div style="background-color: var(--accent-color); color: white; padding: 10px; text-align: center; font-weight: bold;">
                                        Step 1: Start the loop
                                    </div>
                                    <div style="padding: 15px;">
                                        <div style="background-color: #f5f5f5; border-radius: 8px; padding: 15px; display: flex; align-items: center; justify-content: center;">
                                            <div class="code-img-container" onclick="openModal('loop-step-1-img')">
                                                <img src="placeholder-loop-step-1.png" alt="Repeat 3 times block with character move" class="code-img" id="loop-step-1-img">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="loop-visualization">
                                    <h4 style="text-align: center; margin-top: 10px;">Loop Counter: 0</h4>
                                    <div style="display: flex; justify-content: center; margin-top: 15px;">
                                        <div style="background-color: #f5f5f5; border: 2px solid var(--accent-color); border-radius: 10px; padding: 15px; width: 250px; display: flex; flex-direction: column; align-items: center;">
                                            <p style="margin: 0; font-size: 0.9em; color: #666;">The computer prepares to run the loop 3 times. We haven't done any iterations yet.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Loop Step 2: First Iteration -->
                            <div id="loop-step-2" class="loop-step">
                                <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); overflow: hidden; margin: 0 auto 20px auto; max-width: 400px;">
                                    <div style="background-color: var(--accent-color); color: white; padding: 10px; text-align: center; font-weight: bold;">
                                        Step 2: First iteration (1 of 3)
                                    </div>
                                    <div style="padding: 15px;">
                                        <div style="background-color: #f5f5f5; border-radius: 8px; padding: 15px; display: flex; align-items: center; justify-content: center;">
                                            <div class="code-img-container" onclick="openModal('loop-step-2-img')">
                                                <img src="placeholder-loop-step-2.png" alt="Character moves forward first time" class="code-img" id="loop-step-2-img">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="loop-visualization">
                                    <h4 style="text-align: center; margin-top: 10px;">Loop Counter: 1</h4>
                                    <div style="display: flex; justify-content: center; margin-top: 15px;">
                                        <div style="background-color: #f5f5f5; border: 2px solid var(--accent-color); border-radius: 10px; padding: 15px; width: 250px; display: flex; flex-direction: column; align-items: center;">
                                            <p style="margin: 0; font-size: 0.9em; color: #666;">The computer runs the first iteration. The character moves forward once.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Loop Step 3: Second Iteration -->
                            <div id="loop-step-3" class="loop-step">
                                <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); overflow: hidden; margin: 0 auto 20px auto; max-width: 400px;">
                                    <div style="background-color: var(--accent-color); color: white; padding: 10px; text-align: center; font-weight: bold;">
                                        Step 3: Second iteration (2 of 3)
                                    </div>
                                    <div style="padding: 15px;">
                                        <div style="background-color: #f5f5f5; border-radius: 8px; padding: 15px; display: flex; align-items: center; justify-content: center;">
                                            <div class="code-img-container" onclick="openModal('loop-step-3-img')">
                                                <img src="placeholder-loop-step-3.png" alt="Character moves forward second time" class="code-img" id="loop-step-3-img">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="loop-visualization">
                                    <h4 style="text-align: center; margin-top: 10px;">Loop Counter: 2</h4>
                                    <div style="display: flex; justify-content: center; margin-top: 15px;">
                                        <div style="background-color: #f5f5f5; border: 2px solid var(--accent-color); border-radius: 10px; padding: 15px; width: 250px; display: flex; flex-direction: column; align-items: center;">
                                            <p style="margin: 0; font-size: 0.9em; color: #666;">The computer runs the second iteration. The character moves forward again.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Loop Step 4: Third Iteration -->
                            <div id="loop-step-4" class="loop-step">
                                <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); overflow: hidden; margin: 0 auto 20px auto; max-width: 400px;">
                                    <div style="background-color: var(--accent-color); color: white; padding: 10px; text-align: center; font-weight: bold;">
                                        Step 4: Third iteration (3 of 3)
                                    </div>
                                    <div style="padding: 15px;">
                                        <div style="background-color: #f5f5f5; border-radius: 8px; padding: 15px; display: flex; align-items: center; justify-content: center;">
                                            <div class="code-img-container" onclick="openModal('loop-step-4-img')">
                                                <img src="placeholder-loop-step-4.png" alt="Character moves forward third time" class="code-img" id="loop-step-4-img">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="loop-visualization">
                                    <h4 style="text-align: center; margin-top: 10px;">Loop Counter: 3</h4>
                                    <div style="display: flex; justify-content: center; margin-top: 15px;">
                                        <div style="background-color: #f5f5f5; border: 2px solid var(--accent-color); border-radius: 10px; padding: 15px; width: 250px; display: flex; flex-direction: column; align-items: center;">
                                            <p style="margin: 0; font-size: 0.9em; color: #666;">The computer runs the third iteration. The character moves forward one more time.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Loop Step 5: Complete -->
                            <div id="loop-step-5" class="loop-step">
                                <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); overflow: hidden; margin: 0 auto 20px auto; max-width: 400px;">
                                    <div style="background-color: var(--accent-color); color: white; padding: 10px; text-align: center; font-weight: bold;">
                                        Step 5: Loop complete
                                    </div>
                                    <div style="padding: 15px;">
                                        <div style="background-color: #f5f5f5; border-radius: 8px; padding: 15px; display: flex; align-items: center; justify-content: center;">
                                            <div class="code-img-container" onclick="openModal('loop-step-5-img')">
                                                <img src="placeholder-loop-step-5.png" alt="Final position after all iterations" class="code-img" id="loop-step-5-img">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="loop-visualization">
                                    <h4 style="text-align: center; margin-top: 10px;">Loop Complete!</h4>
                                    <div style="display: flex; justify-content: center; margin-top: 15px;">
                                        <div style="background-color: #f5f5f5; border: 2px solid var(--accent-color); border-radius: 10px; padding: 15px; width: 250px; display: flex; flex-direction: column; align-items: center;">
                                            <p style="margin: 0; font-size: 0.9em; color: #666;">The computer has completed all 3 iterations. The loop is finished and the program continues with any code after the loop.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="step-navigation">
                            <button id="prev-loop-btn" class="step-btn" onclick="prevLoopStep()" disabled>
                                <i class="fas fa-chevron-left"></i> Previous
                            </button>
                            <button id="next-loop-btn" class="step-btn" onclick="nextLoopStep()">
                                Next <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="interactive-card" style="margin-top: 30px;">
                    <div class="element-header" style="margin: -35px -35px 30px -35px; padding: 20px 25px;">
                        <div class="element-number">4</div>
                        <h3>Loops with Conditions <i class="fas fa-random" style="margin-left: 10px;"></i></h3>
                    </div>
                    
                    <p style="font-size: 1.2em; text-align: center; margin-bottom: 20px;">We can combine loops with "if" statements to make smart decisions:</p>
                    
                    <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); overflow: hidden; margin: 0 auto; max-width: 400px;">
                        <div style="background-color: var(--accent-color); color: white; padding: 10px; text-align: center; font-weight: bold;">
                            Example: Character that Changes Direction at Walls
                        </div>
                        <div style="padding: 15px;">
                            <div class="code-img-container" onclick="openModal('wall-detection')">
                                <img src="placeholder-wall-detection.png" alt="Loop with if statement to detect walls" class="code-img" id="wall-detection">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3>Practical Examples <i class="fas fa-lightbulb" style="margin-left: 10px;"></i></h3>
                
                <div class="elements-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                    <div class="element-card" style="background-color: #f0f7ff; transition: all 0.3s ease;">
                        <div class="element-header">
                            <div class="element-number">1</div>
                            <h3>BOUNCING BALL <i class="fas fa-basketball-ball" style="margin-left: 12px;"></i></h3>
                        </div>
                        <div class="element-content">
                            <p>A ball that bounces up and down continuously</p>
                            <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); overflow: hidden; margin: 15px auto; max-width: 250px;">
                                <div style="padding: 10px;">
                                    <div style="background-color: #f5f5f5; border-radius: 8px; padding: 10px; display: flex; align-items: center; justify-content: center;">
                                        <div style="width: 200px; height: 120px; background-color: #ddd; display: flex; align-items: center; justify-content: center; border: 2px dashed #999; border-radius: 5px;">
                                            <p style="margin: 0; font-style: italic; color: #666; font-size: 0.9em;">Screenshot: Bouncing ball code</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="element-card" style="background-color: #f0fff4; transition: all 0.3s ease;">
                        <div class="element-header">
                            <div class="element-number">2</div>
                            <h3>FOREST CREATOR <i class="fas fa-tree" style="margin-left: 12px;"></i></h3>
                        </div>
                        <div class="element-content">
                            <p>Creating multiple trees with one loop</p>
                            <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); overflow: hidden; margin: 15px auto; max-width: 250px;">
                                <div style="padding: 10px;">
                                    <div style="background-color: #f5f5f5; border-radius: 8px; padding: 10px; display: flex; align-items: center; justify-content: center;">
                                        <div style="width: 200px; height: 120px; background-color: #ddd; display: flex; align-items: center; justify-content: center; border: 2px dashed #999; border-radius: 5px;">
                                            <p style="margin: 0; font-style: italic; color: #666; font-size: 0.9em;">Screenshot: Forest creator code</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CHEW 2: Try It Yourself -->
        <section id="chew2" class="tab-content light-section">
            <h1>CHEW 2: TRY IT YOURSELF <i class="fas fa-keyboard" style="margin-left: 15px;"></i></h1>
            
            <div class="chew-section">
                <div class="chew-badge">STUDENT ACTIVITY</div>
                <div class="timer-badge"><i class="fas fa-clock"></i> 15 mins</div>
                
                <h3>Hands-On Coding Activity</h3>
                
                <div class="activity-goal">
                    <h4><i class="fas fa-bullseye" style="color: var(--chew-color);"></i> Activity Goals</h4>
                    <ul style="list-style-type: none; padding-left: 0;">
                        <li><i class="fas fa-angle-right" style="margin-right: 12px; color: var(--chew-color);"></i> Create a basic loop in CoSpaces</li>
                        <li><i class="fas fa-angle-right" style="margin-right: 12px; color: var(--chew-color);"></i> Make a character move in a pattern using loops</li>
                        <li><i class="fas fa-angle-right" style="margin-right: 12px; color: var(--chew-color);"></i> Try both "Repeat Forever" and "Repeat X Times" loops</li>
                    </ul>
                </div>
                
                <div class="interactive-card">
                    <div class="element-header" style="margin: -35px -35px 30px -35px; padding: 20px 25px;">
                        <div class="element-number">1</div>
                        <h3>Dancing Character <i class="fas fa-walking" style="margin-left: 10px;"></i></h3>
                    </div>
                    
                    <div style="text-align: center; margin-bottom: 30px;">
                        <i class="fas fa-laptop-code" style="font-size: 5em; color: var(--chew-color);"></i>
                    </div>
                    
                    <ol style="font-size: 1.2em; margin-bottom: 25px;">
                        <li style="margin-bottom: 15px;">Open CoSpaces and create a new project</li>
                        <li style="margin-bottom: 15px;">Add a character to your scene</li>
                        <li style="margin-bottom: 15px;">Create a "Repeat Forever" loop that makes the character move in a square pattern (forward, right, forward, right, etc.)</li>
                        <li>Press play and watch your character dance around!</li>
                    </ol>
                    
                    <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); overflow: hidden; margin: 20px auto; max-width: 400px;">
                        <div style="background-color: var(--chew-color); color: white; padding: 10px; text-align: center; font-weight: bold;">
                            Example: Dancing Character
                        </div>
                        <div style="padding: 15px;">
                            <div style="background-color: #f5f5f5; border-radius: 8px; padding: 15px; display: flex; align-items: center; justify-content: center;">
                                <div class="code-img-container" onclick="openModal('dancing-character')">
                                    <img src="placeholder-dancing-character.png" alt="Dancing character code" class="code-img" id="dancing-character">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="interactive-card" style="margin-top: 30px;">
                    <div class="element-header" style="margin: -35px -35px 30px -35px; padding: 20px 25px;">
                        <div class="element-number">2</div>
                        <h3>Extension: Build a Fence <i class="fas fa-project-diagram" style="margin-left: 10px;"></i></h3>
                    </div>
                    
                    <p style="font-size: 1.2em; margin-bottom: 20px;">Now let's use a "Repeat X Times" loop to build something:</p>
                    <ol style="font-size: 1.2em; margin-bottom: 25px;">
                        <li style="margin-bottom: 15px;">Add a cube or fence post to your scene</li>
                        <li style="margin-bottom: 15px;">Use a "Repeat 10 Times" loop to create 10 fence posts in a row</li>
                        <li style="margin-bottom: 15px;">Inside your loop, create a fence post and move it to the right</li>
                        <li>Run your code to see the fence appear!</li>
                    </ol>
                    
                    <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); overflow: hidden; margin: 20px auto; max-width: 400px;">
                        <div style="background-color: var(--chew-color); color: white; padding: 10px; text-align: center; font-weight: bold;">
                            Example: Building a Fence
                        </div>
                        <div style="padding: 15px;">
                            <div style="background-color: #f5f5f5; border-radius: 8px; padding: 15px; display: flex; align-items: center; justify-content: center;">
                                <div class="code-img-container" onclick="openModal('fence-builder')">
                                    <img src="placeholder-fence-builder.png" alt="Fence builder code" class="code-img" id="fence-builder">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="interactive-card" style="margin-top: 30px;">
                    <div class="element-header" style="margin: -35px -35px 30px -35px; padding: 20px 25px;">
                        <div class="element-number">3</div>
                        <h3>Challenge: Smart Patrol <i class="fas fa-robot" style="margin-left: 10px;"></i></h3>
                    </div>
                    
                    <p style="font-size: 1.2em; margin-bottom: 20px;">For an extra challenge, try combining loops with conditions:</p>
                    <ol style="font-size: 1.2em; margin-bottom: 25px;">
                        <li style="margin-bottom: 15px;">Create a character and some walls or obstacles</li>
                        <li style="margin-bottom: 15px;">Use a "Repeat Forever" loop to make the character move forward</li>
                        <li style="margin-bottom: 15px;">Add an "if" statement inside the loop to check if the character hits a wall</li>
                        <li>If it hits a wall, make it turn around and go the other way</li>
                    </ol>
                    
                    <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); overflow: hidden; margin: 20px auto; max-width: 400px;">
                        <div style="background-color: var(--chew-color); color: white; padding: 10px; text-align: center; font-weight: bold;">
                            Example: Smart Patrol
                        </div>
                        <div style="padding: 15px;">
                            <div style="background-color: #f5f5f5; border-radius: 8px; padding: 15px; display: flex; align-items: center; justify-content: center;">
                                <div class="code-img-container" onclick="openModal('smart-patrol')">
                                    <img src="placeholder-smart-patrol.png" alt="Smart patrol code" class="code-img" id="smart-patrol">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
            
            <div class="card">
                <h3>Common Mistakes to Avoid <i class="fas fa-exclamation-triangle" style="margin-left: 10px;"></i></h3>
                
                <div class="two-column-grid">
                    <div class="interactive-card" style="border-left: 4px solid var(--bad-color);">
                        <h4><i class="fas fa-times-circle" style="color: var(--bad-color); margin-right: 12px;"></i> Common Mistake:</h4>
                        <p>Creating an infinite loop that freezes your program</p>
                        <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); overflow: hidden; margin: 15px auto; max-width: 250px;">
                            <div style="padding: 10px;">
                                <div style="background-color: #f5f5f5; border-radius: 8px; padding: 10px; display: flex; align-items: center; justify-content: center;">
                                    <div class="code-img-container" onclick="openModal('infinite-loop')">
                                        <img src="placeholder-infinite-loop.png" alt="Infinite loop example" class="code-img" id="infinite-loop">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="interactive-card" style="border-left: 4px solid var(--bad-color);">
                        <h4><i class="fas fa-times-circle" style="color: var(--bad-color); margin-right: 12px;"></i> Common Mistake:</h4>
                        <p>Forgetting to put code inside the loop blocks</p>
                        <div style="border: 2px solid var(--outline-color); border-radius: var(--border-radius); overflow: hidden; margin: 15px auto; max-width: 250px;">
                            <div style="padding: 10px;">
                                <div style="background-color: #f5f5f5; border-radius: 8px; padding: 10px; display: flex; align-items: center; justify-content: center;">
                                    <div class="code-img-container" onclick="openModal('empty-loop')">
                                        <img src="placeholder-empty-loop.png" alt="Empty loop example" class="code-img" id="empty-loop">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="background-color: rgba(0,0,0,0.05); border-radius: var(--border-radius); padding: 20px; margin-top: 25px;">
                    <h4 style="margin-top: 0;"><i class="fas fa-lightbulb" style="color: var(--accent-color); margin-right: 10px;"></i> Key Points We Learned</h4>
                    <ul style="list-style-type: none; padding-left: 0;">
                        <li><i class="fas fa-check" style="margin-right: 12px; color: var(--good-color);"></i> Loops help us repeat code without having to write it multiple times</li>
                        <li><i class="fas fa-check" style="margin-right: 12px; color: var(--good-color);"></i> "Repeat Forever" loops continue until the program stops</li>
                        <li><i class="fas fa-check" style="margin-right: 12px; color: var(--good-color);"></i> "Repeat X Times" loops run exactly the number of times you specify</li>
                        <li><i class="fas fa-check" style="margin-right: 12px; color: var(--good-color);"></i> We can use loops to create animations and repeating behaviors</li>
                        <li><i class="fas fa-check" style="margin-right: 12px; color: var(--good-color);"></i> Loops make our code shorter, simpler, and easier to change</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <!-- Image Modal -->
    <div id="imageModal" class="img-modal">
        <span class="close-modal" onclick="closeModal()">&times;</span>
        <img class="modal-content" id="modalImage">
    </div>

    <script>
        // Tab switching
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', function() {
                    const tab = this.getAttribute('data-tab');
                    
                    // Remove active class from all buttons and tabs
                    document.querySelectorAll('.tab-button').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Add active class to selected button and tab
                    this.classList.add('active');
                    document.getElementById(tab).classList.add('active');
                });
            });
            
            // Initialize loop visualization steps
            document.getElementById('loop-step-1').classList.add('active');
            document.getElementById('loop-step-2').classList.remove('active');
            document.getElementById('loop-step-3').classList.remove('active');
            document.getElementById('loop-step-4').classList.remove('active');
            document.getElementById('loop-step-5').classList.remove('active');
            
            document.getElementById('prev-loop-btn').disabled = true;
            document.getElementById('next-loop-btn').disabled = false;
        });
        
        // Loop visualization step by step navigation
        let currentLoopStep = 1;
        const totalLoopSteps = 5;
        
        function initLoopSteps() {
            // Hide all steps except the first one
            for (let i = 1; i <= totalLoopSteps; i++) {
                const step = document.getElementById(`loop-step-${i}`);
                if (step) {
                    if (i === 1) {
                        step.classList.add('active');
                    } else {
                        step.classList.remove('active');
                    }
                }
            }
            
            // Reset buttons
            document.getElementById('prev-loop-btn').disabled = true;
            document.getElementById('next-loop-btn').disabled = false;
            
            // Update indicator
            document.getElementById('loop-step-indicator').textContent = `Step 1 of ${totalLoopSteps}`;
        }
        
        function nextLoopStep() {
            if (currentLoopStep < totalLoopSteps) {
                // Hide current step
                const currentStep = document.getElementById(`loop-step-${currentLoopStep}`);
                if (currentStep) {
                    currentStep.classList.remove('active');
                }
                
                // Show next step
                currentLoopStep++;
                const nextStep = document.getElementById(`loop-step-${currentLoopStep}`);
                if (nextStep) {
                    nextStep.classList.add('active');
                }
                
                // Update indicator and buttons
                document.getElementById('loop-step-indicator').textContent = `Step ${currentLoopStep} of ${totalLoopSteps}`;
                document.getElementById('prev-loop-btn').disabled = false;
                
                if (currentLoopStep === totalLoopSteps) {
                    document.getElementById('next-loop-btn').disabled = true;
                }
            }
        }
        
        function prevLoopStep() {
            if (currentLoopStep > 1) {
                // Hide current step
                const currentStep = document.getElementById(`loop-step-${currentLoopStep}`);
                if (currentStep) {
                    currentStep.classList.remove('active');
                }
                
                // Show previous step
                currentLoopStep--;
                const prevStep = document.getElementById(`loop-step-${currentLoopStep}`);
                if (prevStep) {
                    prevStep.classList.add('active');
                }
                
                // Update indicator and buttons
                document.getElementById('loop-step-indicator').textContent = `Step ${currentLoopStep} of ${totalLoopSteps}`;
                document.getElementById('next-loop-btn').disabled = false;
                
                if (currentLoopStep === 1) {
                    document.getElementById('prev-loop-btn').disabled = true;
                }
            }
        }

        // Image modal functions
        function openModal(imgId) {
            console.log('Opening modal for:', imgId); // Debug
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImage');
            const img = document.getElementById(imgId);
            
            if (!img) {
                console.error('Image not found:', imgId);
                return;
            }
            
            if (!modal || !modalImg) {
                console.error('Modal elements not found');
                return;
            }
            
            modalImg.src = img.src;
            modal.style.display = 'block';
            
            // Add keyboard event listener for ESC key
            document.addEventListener('keydown', closeModalOnEsc);
            
            // Prevent scrolling when modal is open
            document.body.style.overflow = 'hidden';
        }
        
        function closeModal() {
            const modal = document.getElementById('imageModal');
            if (!modal) return;
            
            modal.style.display = 'none';
            
            // Remove keyboard event listener
            document.removeEventListener('keydown', closeModalOnEsc);
            
            // Re-enable scrolling
            document.body.style.overflow = 'auto';
        }
        
        function closeModalOnEsc(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        }
        
        // Close modal if user clicks outside the image
        window.onclick = function(event) {
            const modal = document.getElementById('imageModal');
            if (event.target === modal) {
                closeModal();
            }
        };
    </script>
</body>
</html>